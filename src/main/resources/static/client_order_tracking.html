<!DOCTYPE html>

<html class="light" lang="en"><head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <title>Track Order - Foody</title>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;700;800&amp;display=swap" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap" rel="stylesheet"/>
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <script id="tailwind-config">
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#f26c0d",
                        "background-light": "#f8f7f5",
                        "background-dark": "#221710",
                        "surface-light": "#ffffff",
                        "surface-dark": "#2d241e",
                        "text-main": "#181411",
                        "text-muted": "#8a7260",
                    },
                    fontFamily: { "display": ["Plus Jakarta Sans", "sans-serif"] },
                    borderRadius: { "DEFAULT": "0.5rem", "lg": "1rem", "xl": "1.5rem", "full": "9999px" },
                },
            },
        }
    </script>
    <style>
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #d1d5db; border-radius: 4px; }
        .material-symbols-outlined { font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24; vertical-align: middle; }
        .progress-step-done { color: #f26c0d; }
        .progress-step-current { color: #f26c0d; font-weight: 700; }
    </style>
</head>
<body class="bg-background-light dark:bg-background-dark text-text-main dark:text-white font-display min-h-screen flex flex-col">
<header class="flex items-center justify-between border-b border-[#e6dfdb] dark:border-[#3e342f] bg-surface-light dark:bg-surface-dark px-4 sm:px-6 lg:px-10 py-4 sticky top-0 z-50">
    <div class="flex items-center gap-4">
        <div class="size-8 text-primary">
            <svg class="w-full h-full" fill="none" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">
                <path clip-rule="evenodd" d="M24 4H6V17.3333V30.6667H24V44H42V30.6667V17.3333H24V4Z" fill="currentColor" fill-rule="evenodd"/>
            </svg>
        </div>
        <h2 class="text-2xl font-bold tracking-tight">Foody</h2>
    </div>
    <button id="back-to-home-button" class="flex items-center gap-2 rounded-xl h-10 px-5 bg-primary/10 hover:bg-primary/20 text-primary text-sm font-bold transition-colors">
        <span class="material-symbols-outlined text-[20px]">arrow_back</span>
        <span class="hidden sm:inline">Back to Home</span>
    </button>
</header>

<main class="flex-grow max-w-2xl mx-auto w-full px-4 sm:px-6 py-8">
    <div id="track-no-order" class="hidden text-center py-12">
        <p class="text-text-muted dark:text-gray-400 mb-4">No order selected. Add ?orderId=... to the URL or open from Past Orders.</p>
        <a href="/restaurants" class="inline-flex items-center justify-center rounded-xl px-6 py-3 bg-primary text-white font-bold hover:bg-primary/90">Browse restaurants</a>
    </div>

    <div id="track-content" class="flex flex-col gap-6">
        <div class="flex flex-col gap-2">
            <div class="flex items-center gap-3">
                <span id="order-status-badge" class="bg-primary/10 text-primary px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wider">—</span>
                <span id="order-updated" class="text-text-muted dark:text-gray-400 text-sm">—</span>
            </div>
            <h1 id="order-number" class="text-3xl sm:text-4xl font-black tracking-tight">Order #—</h1>
            <p class="text-text-muted dark:text-gray-400">
                <span id="order-eta-label">Arriving</span> <span id="order-eta" class="text-primary font-bold">—</span>
            </p>
        </div>

        <!-- Progress bar: Preparing | Delivering | Delivered -->
        <div class="bg-surface-light dark:bg-surface-dark rounded-xl border border-[#e6dfdb] dark:border-[#3e342f] p-6">
            <h3 class="text-lg font-bold mb-4">Order status</h3>
            <div class="flex items-center gap-0">
                <div id="step-preparing" class="flex-1 flex flex-col items-center text-center">
                    <span id="step-preparing-label" class="text-sm font-semibold text-text-muted dark:text-gray-400">Preparing</span>
                    <div class="mt-2 w-full h-2 rounded-full bg-gray-200 dark:bg-gray-700 overflow-hidden">
                        <div id="bar-preparing" class="h-full bg-primary rounded-full transition-all duration-300" style="width: 0%"></div>
                    </div>
                </div>
                <div class="w-4 flex-shrink-0 h-2 bg-gray-200 dark:bg-gray-700 rounded"></div>
                <div id="step-delivering" class="flex-1 flex flex-col items-center text-center">
                    <span id="step-delivering-label" class="text-sm font-semibold text-text-muted dark:text-gray-400">Delivering</span>
                    <div class="mt-2 w-full h-2 rounded-full bg-gray-200 dark:bg-gray-700 overflow-hidden">
                        <div id="bar-delivering" class="h-full bg-primary rounded-full transition-all duration-300" style="width: 0%"></div>
                    </div>
                </div>
                <div class="w-4 flex-shrink-0 h-2 bg-gray-200 dark:bg-gray-700 rounded"></div>
                <div id="step-delivered" class="flex-1 flex flex-col items-center text-center">
                    <span id="step-delivered-label" class="text-sm font-semibold text-text-muted dark:text-gray-400">Delivered</span>
                    <div class="mt-2 w-full h-2 rounded-full bg-gray-200 dark:bg-gray-700 overflow-hidden">
                        <div id="bar-delivered" class="h-full bg-primary rounded-full transition-all duration-300" style="width: 0%"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Delivery address -->
        <div id="delivery-address-card" class="bg-surface-light dark:bg-surface-dark rounded-xl border border-[#e6dfdb] dark:border-[#3e342f] p-5">
            <h3 class="text-base font-bold mb-2 flex items-center gap-2">
                <span class="material-symbols-outlined text-primary text-[20px]">location_on</span>
                Delivery address
            </h3>
            <p id="delivery-address-text" class="text-text-muted dark:text-gray-400 text-sm">—</p>
        </div>

        <!-- Courier -->
        <div class="bg-surface-light dark:bg-surface-dark rounded-xl border border-[#e6dfdb] dark:border-[#3e342f] p-5">
            <p class="text-base font-bold mb-1">Your courier</p>
            <p id="courier-desc" class="text-text-muted dark:text-gray-400 text-sm">—</p>
            <div class="mt-4 pt-4 border-t border-[#e6dfdb] dark:border-[#3e342f] flex gap-3">
                <button id="call-courier-btn" class="flex-1 flex items-center justify-center gap-2 rounded-lg h-9 px-4 bg-primary text-white text-sm font-bold hover:bg-orange-600 transition-colors">
                    <span class="material-symbols-outlined text-[18px]">call</span> Call
                </button>
            </div>
        </div>

        <!-- Order summary (filled by JS) -->
        <div class="bg-surface-light dark:bg-surface-dark rounded-xl border border-[#e6dfdb] dark:border-[#3e342f] overflow-hidden">
            <div class="p-5 border-b border-[#e6dfdb] dark:border-[#3e342f]">
                <h3 class="text-lg font-bold">Order summary</h3>
            </div>
            <div class="p-5 bg-background-light dark:bg-[#251d18]">
                <ul id="order-items-list" class="flex flex-col gap-3">
                    <!-- Filled by JS -->
                </ul>
                <div class="mt-4 pt-4 border-t border-[#e6dfdb] dark:border-[#3e342f] flex justify-between items-center">
                    <span class="font-bold">Total</span>
                    <span id="order-total" class="text-lg font-black">—</span>
                </div>
            </div>
        </div>
    </div>
</main>
<script src="/js/client/order-track-controller.js"></script>
</body></html>
